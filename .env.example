# =============================================================================
# polyg-mcp Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# Required variables are marked with [REQUIRED]
# =============================================================================

# -----------------------------------------------------------------------------
# OpenAI Configuration
# -----------------------------------------------------------------------------

# [REQUIRED] OpenAI API Key
OPENAI_API_KEY=sk-your-openai-api-key-here

# LLM Model: gpt-4o-mini, gpt-4o, gpt-4-turbo, gpt-5-mini
LLM_MODEL=gpt-4o-mini

# Max tokens for intent classifier responses
CLASSIFIER_MAX_TOKENS=2000

# Max tokens for synthesizer responses
SYNTHESIZER_MAX_TOKENS=2000

# Embedding Model: text-embedding-3-small, text-embedding-3-large, text-embedding-ada-002
EMBEDDING_MODEL=text-embedding-3-small

# -----------------------------------------------------------------------------
# FalkorDB Configuration
# -----------------------------------------------------------------------------

# FalkorDB Host (use 'falkordb' for docker-compose, 'localhost' for local)
FALKORDB_HOST=falkordb

# FalkorDB Port
FALKORDB_PORT=6379

# FalkorDB Password (optional, leave empty for no password)
FALKORDB_PASSWORD=

# Graph Name
FALKORDB_GRAPH=polyg

# External port for FalkorDB (only for docker-compose)
FALKORDB_EXTERNAL_PORT=6379

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------

# Server Port
PORT=4000

# Server Mode: http | stdio (http for standalone server, stdio for MCP integration)
POLYG_MODE=http

# Log Level: debug | info | warn | error
LOG_LEVEL=info

# Node Environment: development | production
NODE_ENV=production

# -----------------------------------------------------------------------------
# Agent Configuration
# -----------------------------------------------------------------------------

# MCP Server URL for agent connections
POLYG_SERVER_URL=http://localhost:4000

# -----------------------------------------------------------------------------
# MAGMA Retrieval Configuration
# -----------------------------------------------------------------------------

# Semantic seeding
MAGMA_SEMANTIC_TOP_K=10
MAGMA_MIN_SEMANTIC_SCORE=0.5

# Default traversal depths (overridden by intent classification)
# WHY queries use deep causal (3), WHEN uses deep temporal (3), etc.
MAGMA_ENTITY_DEPTH=2
MAGMA_TEMPORAL_DEPTH=2
MAGMA_CAUSAL_DEPTH=3

# Fallbacks and limits
MAGMA_MIN_NODES_PER_VIEW=3
MAGMA_MAX_NODES_PER_VIEW=50

# Multi-view scoring boost (nodes found in 2+ views get boosted)
MAGMA_MULTI_VIEW_BOOST=1.5

# -----------------------------------------------------------------------------
# Testing Configuration
# -----------------------------------------------------------------------------

# Keep test data for visualization (set to 1 to preserve data after tests)
# Run tests with: KEEP_TEST_DATA=1 pnpm test
KEEP_TEST_DATA=
