<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 400">
  <defs>
    <linearGradient id="flowBg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0d1117"/>
      <stop offset="100%" style="stop-color:#161b22"/>
    </linearGradient>
    
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#7c3aed"/>
      <stop offset="100%" style="stop-color:#a855f7"/>
    </linearGradient>
    
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#60a5fa"/>
    </linearGradient>
    
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#34d399"/>
    </linearGradient>
    
    <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#fbbf24"/>
    </linearGradient>
    
    <linearGradient id="redGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ef4444"/>
      <stop offset="100%" style="stop-color:#f87171"/>
    </linearGradient>
    
    <filter id="flowGlow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 Z" fill="#6e7681"/>
    </marker>
    
    <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 Z" fill="#a855f7"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="400" fill="url(#flowBg)"/>
  
  <!-- Stage 1: User Query -->
  <g transform="translate(50, 170)">
    <rect width="120" height="60" rx="8" fill="#21262d" stroke="#30363d" stroke-width="2"/>
    <g transform="translate(15, 18)">
      <circle cx="12" cy="12" r="10" fill="none" stroke="#8b949e" stroke-width="2"/>
      <circle cx="12" cy="9" r="3" fill="#8b949e"/>
      <path d="M6 18 Q12 14 18 18" fill="none" stroke="#8b949e" stroke-width="2"/>
    </g>
    <text x="45" y="35" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#fff">User Query</text>
    <text x="60" y="50" font-family="system-ui, sans-serif" font-size="9" fill="#6e7681" text-anchor="middle">"Why did X fail?"</text>
  </g>
  
  <!-- Arrow 1 -->
  <line x1="175" y1="200" x2="210" y2="200" stroke="#6e7681" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Stage 2: Intent Classifier -->
  <g transform="translate(220, 155)">
    <rect width="140" height="90" rx="10" fill="#161b22" stroke="url(#purpleGrad)" stroke-width="2" filter="url(#flowGlow)"/>
    <rect width="140" height="30" rx="10" fill="url(#purpleGrad)"/>
    <rect y="20" width="140" height="10" fill="url(#purpleGrad)"/>
    
    <!-- Brain icon -->
    <g transform="translate(10, 6)">
      <ellipse cx="10" cy="10" rx="8" ry="6" fill="none" stroke="#fff" stroke-width="1.5"/>
      <path d="M4 8 Q10 6 16 8" stroke="#fff" stroke-width="1" fill="none"/>
      <path d="M5 12 Q10 10 15 12" stroke="#fff" stroke-width="1" fill="none"/>
    </g>
    <text x="35" y="19" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#fff">LLM Classifier</text>
    
    <text x="70" y="55" font-family="system-ui, sans-serif" font-size="10" fill="#8b949e" text-anchor="middle">Intent Detection</text>
    <text x="70" y="70" font-family="system-ui, sans-serif" font-size="9" fill="#6e7681" text-anchor="middle">→ causal + temporal</text>
  </g>
  
  <!-- Arrow 2 (splits into 4) -->
  <g stroke="#6e7681" stroke-width="2" fill="none">
    <path d="M365 200 L400 200 L420 80" marker-end="url(#arrow)"/>
    <path d="M365 200 L400 200 L420 145" marker-end="url(#arrow)"/>
    <path d="M365 200 L400 200 L420 255" marker-end="url(#arrow)"/>
    <path d="M365 200 L400 200 L420 320" marker-end="url(#arrow)"/>
  </g>
  
  <!-- Parallel indicator -->
  <text x="395" y="190" font-family="system-ui, sans-serif" font-size="10" fill="#a855f7" font-weight="600">∥</text>
  <text x="382" y="205" font-family="system-ui, sans-serif" font-size="8" fill="#6e7681">parallel</text>
  
  <!-- Stage 3: Four Graphs (stacked) -->
  <!-- Semantic -->
  <g transform="translate(430, 55)">
    <rect width="130" height="50" rx="6" fill="#161b22" stroke="url(#blueGrad)" stroke-width="2" opacity="0.5"/>
    <circle cx="20" cy="25" r="8" fill="url(#blueGrad)" opacity="0.4"/>
    <text x="35" y="29" font-family="system-ui, sans-serif" font-size="11" font-weight="500" fill="#3b82f6">Semantic</text>
    <text x="105" y="29" font-family="system-ui, sans-serif" font-size="9" fill="#6e7681">skip</text>
  </g>
  
  <!-- Temporal (active) -->
  <g transform="translate(430, 120)" filter="url(#flowGlow)">
    <rect width="130" height="50" rx="6" fill="#161b22" stroke="url(#greenGrad)" stroke-width="2"/>
    <circle cx="20" cy="25" r="8" fill="url(#greenGrad)"/>
    <text x="35" y="29" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#10b981">Temporal</text>
    <text x="105" y="29" font-family="system-ui, sans-serif" font-size="9" fill="#10b981">✓</text>
  </g>
  
  <!-- Causal (active) -->
  <g transform="translate(430, 230)" filter="url(#flowGlow)">
    <rect width="130" height="50" rx="6" fill="#161b22" stroke="url(#orangeGrad)" stroke-width="2"/>
    <circle cx="20" cy="25" r="8" fill="url(#orangeGrad)"/>
    <text x="35" y="29" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#f59e0b">Causal</text>
    <text x="105" y="29" font-family="system-ui, sans-serif" font-size="9" fill="#f59e0b">✓</text>
  </g>
  
  <!-- Entity -->
  <g transform="translate(430, 295)">
    <rect width="130" height="50" rx="6" fill="#161b22" stroke="url(#redGrad)" stroke-width="2" opacity="0.5"/>
    <circle cx="20" cy="25" r="8" fill="url(#redGrad)" opacity="0.4"/>
    <text x="35" y="29" font-family="system-ui, sans-serif" font-size="11" font-weight="500" fill="#ef4444">Entity</text>
    <text x="105" y="29" font-family="system-ui, sans-serif" font-size="9" fill="#6e7681">skip</text>
  </g>
  
  <!-- Arrows from active graphs to synthesizer -->
  <g stroke="#6e7681" stroke-width="2" fill="none">
    <path d="M565 145 L600 145 L620 200" marker-end="url(#arrow)"/>
    <path d="M565 255 L600 255 L620 200" marker-end="url(#arrow)"/>
  </g>
  
  <!-- Stage 4: Synthesizer -->
  <g transform="translate(630, 155)">
    <rect width="140" height="90" rx="10" fill="#161b22" stroke="url(#purpleGrad)" stroke-width="2" filter="url(#flowGlow)"/>
    <rect width="140" height="30" rx="10" fill="url(#purpleGrad)"/>
    <rect y="20" width="140" height="10" fill="url(#purpleGrad)"/>
    
    <!-- Merge icon -->
    <g transform="translate(10, 6)">
      <path d="M5 5 L12 12 L5 19" fill="none" stroke="#fff" stroke-width="1.5"/>
      <path d="M19 5 L12 12 L19 19" fill="none" stroke="#fff" stroke-width="1.5"/>
    </g>
    <text x="35" y="19" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#fff">LLM Synthesizer</text>
    
    <text x="70" y="55" font-family="system-ui, sans-serif" font-size="10" fill="#8b949e" text-anchor="middle">Merge &amp; Reason</text>
    <text x="70" y="70" font-family="system-ui, sans-serif" font-size="9" fill="#6e7681" text-anchor="middle">Coherent answer</text>
  </g>
  
  <!-- Arrow 5 -->
  <line x1="775" y1="200" x2="810" y2="200" stroke="url(#purpleGrad)" stroke-width="3" marker-end="url(#arrowPurple)"/>
  
  <!-- Stage 5: Answer -->
  <g transform="translate(820, 160)">
    <rect width="60" height="80" rx="8" fill="#161b22" stroke="#a855f7" stroke-width="2" filter="url(#flowGlow)"/>
    <text x="30" y="30" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#a855f7" text-anchor="middle">Answer</text>
    
    <!-- Check icon -->
    <g transform="translate(18, 40)">
      <circle cx="12" cy="12" r="10" fill="#a855f7" opacity="0.2"/>
      <path d="M7 12 L11 16 L18 8" fill="none" stroke="#a855f7" stroke-width="2"/>
    </g>
  </g>
  
  <!-- Labels -->
  <text x="110" y="250" font-family="system-ui, sans-serif" font-size="9" fill="#6e7681" text-anchor="middle">INPUT</text>
  <text x="290" y="265" font-family="system-ui, sans-serif" font-size="9" fill="#6e7681" text-anchor="middle">CLASSIFY</text>
  <text x="495" y="365" font-family="system-ui, sans-serif" font-size="9" fill="#6e7681" text-anchor="middle">QUERY (parallel)</text>
  <text x="700" y="265" font-family="system-ui, sans-serif" font-size="9" fill="#6e7681" text-anchor="middle">SYNTHESIZE</text>
  <text x="850" y="260" font-family="system-ui, sans-serif" font-size="9" fill="#6e7681" text-anchor="middle">OUTPUT</text>
  
  <!-- Title -->
  <text x="450" y="385" font-family="system-ui, sans-serif" font-size="12" fill="#8b949e" text-anchor="middle">Query Reasoning Flow • LLM classifies intent → Parallel graph queries → LLM synthesizes answer</text>
</svg>
